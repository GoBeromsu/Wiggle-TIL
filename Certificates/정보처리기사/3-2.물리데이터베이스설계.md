# 3-2.물리데이터베이스설계

## 트랜잭션 분석/CRUD 분석

- [ ]  트랜잭션 정의
  - [ ]  데이터 베이스 상태 변환시키는 논리적 기능 작업 단위
- [ ]  트랜잭션의 특성
  - [ ]  Atomicity(원자성)
    - [ ]  트랜잭션 연산은 완료(commit)되거나 복구(rollback)만 되어야한다
    - [ ]  트랜잭션 내의 모든 명령은 완벽히 수행되거나 취소 되어야한다
  - [ ]  Consistency(일관성)
    - [ ]  일관성 있는 데이터베이스 상태로 변환
    - [ ]  시스템 고정요소가 트랜잭션 수행 전 후의 상태가 같아야한다
  - [ ]  Isolation(독립성,격리성,순차성)
    - [ ]  트랜잭션 연산 중 다른 연산이 끼어들 수 없다.
  - [ ]  Durability(영속성,지속성)
    - [ ]  성공적으로 완료된 트랜잭션 결과는 영구적으로 반영 되어야함
  - [ ]  CRUD 분석
    - [ ]  CRUD 연산에 대해 CRUD 매트릭스를 작성하여 분석하는 것이다.
    - [ ]  주기별 발생 횟수 및 연관 테이블을 분석하면 저장 데이터 양 유추 가능
    - [ ]  연결 지연이나 타임아웃 오류 방지
  - [ ]  CRUD 매트릭스
    - [ ]  행 → 프로세스
    - [ ]  열 →테이블
    - [ ]  업무 프로세스와 데이터 간의 상관 분석표
    - [ ]  우선순위 C > D > U > R
  - [ ]  트랜잭션 분석
    - [ ]  CRUD 매트릭스 기반으로 트랜잭션 분석
    - [ ]  데이터 양을 유추하고, DB 용량 산정 및 DB 구조 최적화
    - [ ]  업무 개발 담당자가 수행
  - [ ]  인덱스
    - [ ]  데이터 레코드를 빠르게 접근하기 위해 <KEY, POINTER> 쌍으로 구성되는 데이터 구조
    - [ ]  물리적 구조에 접근하는 방법 제공
    - [ ]  DDL을 이용하여 사용자가 생성,변경,제거 할 수 있다.
    - [ ]  인덱스가 없으면 TABLE SCAN 실행(모든 데이터 페이지 확인)
  - [ ]  클러스티드 인덱스
    - [ ]  물리적 순서가 인덱스의 엔트리 순서와 일치하게 유지되도록 구성되는 인덱스
    - [ ]  하나의 릴레이션에 하나의 인덱스만 생성 가능
  - [ ]  트리 기반 인덱스
    - [ ]  인덱스를 저장하는 블록들이 트리 구조를 형성
    - [ ]  B+ 트리 인덱스 주로 사용
    - [ ]  B 트리
      - [ ]  브랜치 블록과 리프 블록으로 구성
        - [ ]  브랜치 블록 : 분기 목적, 다음 단계를 가리키는 포인터 존재
        - [ ]  리프 블록 : 컬럼 데이터와 레코드 식별자로 구성
    - [ ]  B+ 트리
      - [ ]  인덱스 세트와 단말 노드로만 구성된 순차세트로 구분된다.
      - [ ]  인덱스 세트의 노드
        - [ ]  단말 노드 키 값 경로만 제공
        - [ ]  모든 키 값이 단말 노드에 다시 나타남(순차 처리 가능)
      - [ ]  순차세트의 노드
        - [ ]  해당 데이터 레코드의 주소를 가리킴
    - [ ]  비트맵 인덱스
      - [ ]  키 값을 포함하는 로우 주소를 제공하는 것을 목적
      - [ ]  분포도가 좋은 컬럼에 적합
      - [ ]  효율적이며 저장 공간이 작다
      - [ ]  다중 조건을 만족하는 튜플 개수 계산에 적합
      - [ ]  압축 효율이 좋다
    - [ ]  함수 기반 인덱스
      - [ ]  B+ 트리 인덱스 또는 비트맵 인덱스를 생성하여 사용
      - [ ]  부하 발생 가능(사용자 정의 함수 일 경우 더 크다)
      - [ ]  대소문자, 띄어쓰기 등에 상관없이 조회할 때 유용하게 사용
    - [ ]  비트맵 조인 인덱스
      - [ ]  다수의 조인된 객체로 구성된 인덱스
      - [ ]  비트맵 인덱스와 물리적 구조 동일
    - [ ]  도메인 인덱스
      - [ ]  개발자가 필요한 인덱스를 직접 만들어 사용
      - [ ]  확장형 인덱스라고도 함
    - [ ]  인덱스 설계
      - [ ]  분명하게 드러난 컬럼에 대해 기본적인 인덱스 먼저 지정
      - [ ]  개발 단계에서 필요한 인덱스 설계를 반복적으로 진행
    - [ ]  인덱스 대상 테이블 선정 기준
      - [ ]  MULTI BLOCK READ 수에 따라 판단
      - [ ]  랜덤 액섹스가 빈번한 테이블
      - [ ]  특정 범위나 특정 순서로 데이터 조회가 필요한 테이블
      - [ ]  다른 테이블과 순차적 조인이 발생되는 테이블

## 뷰 설계

- [ ]  뷰
  - [ ]  하나 이상의 기본 테이블로부터 유도된, 이름을 가지는 가상 테이블
  - [ ]  물리적으로 존재하지 않지만,사용자에게는 있는 것처럼 간주
  - [ ]  조인문 사용 최소화
- [ ]  뷰의 특징
  - [ ]  데이터의 논리적 독립성 보장
  - [ ]  명령문 간단
  - [ ]  기본키를 퐆함한 속성 집합으로 뷰를 구성해야 삽입, 삭제, 갱신 연산 가능
  - [ ]  정의도니 뷰는 다른 뷰 정의의 기초가 될 수 있다.
    - 기초가 되는 뷰를 지우면 그에 따른 뷰들도 삭제됨
  - [ ]  CREATE, DROP 문으로 삭제 및 생성
- [ ]  뷰의 장점
  - [ ]  논리적 데이터 독립성 제공
  - [ ]  접근 제어를통해 자동 보안
- [ ]  뷰의 단점
  - [ ]  독립적인 인덱스를 가질 수 없다
  - [ ]  뷰의 정의를 변경 할 수 없다.
  - [ ]  삽입, 삭제, 갱신 연산에 제약이 존재한다
- [ ]  뷰 설계시 고려사항
  - [ ]  반복적으로 조인을 설정하는 테이블을 뷰로 생성
  - [ ]  동일한 조건절을 사용하는 테이블을 뷰로 생성

## 파티션 설계

- [ ]  파티션
  - [ ]  대용량 테이블이나 인덱스를 작은 논리적 단위로 나눈 것
  - [ ]  파티션키 또는 인덱스키에 따라 물리적으로 별도 공간에 저장
  - [ ]  데이터 처리는 테이블 단위, 데이터 저장은 파티션 별로 수행
- [ ]  파티션의 장점
  - [ ]  액세스 범위를 줄여 쿼리 성능 향상
  - [ ]  디스크 성능 향상
  - [ ]  데이터 가용성 향상
  - [ ]  입출력 분산 가능
- [ ]  단점
  - [ ]  테이블간 조인에 대한 비용 증가
  - [ ]  용량이 작은 테이블에서는 오히려 역효과
- [ ]  파티션의 종류
  - [ ]  범위 분할
    - [ ]  지정한 열의 값을 기준으로 범위 지정
  - [ ]  해시 분할
    - [ ]  특정 데이터가 어디 있는지 판단 불가
    - [ ]  특정 파티션에 데이터가 집중되는 범위 분할 단점 보안 → 데이터 분산 목적
  - [ ]  조합 분할
    - [ ]  범위 분할 → 해시 분할한 방식
    - [ ]  범위 분할한 파티션이 너무 커 관리가 어려울 때 사용
  - [ ]  목록 분할
    - [ ]  지정한 열 값에 대한 목록을 만들어 분할
  - [ ]  라운드 로빈 분할
    - [ ]  레코드를 균일하게 분배하는 방식
    - [ ]  기본키가 필요없다
- [ ]  파티션키 선정시 고려사항
  - [ ]  이력성 데이터는 파티션 생성주기와 소멸주기를 일치시켜야함
  - [ ]  테이블 접근 유형에 따라 파티셔닝
- [ ]  인덱스 파티션
  - [ ]  파티션된 테이블의 데이터 관리를 위해 인덱스를 나눈 것
  - [ ]  local partition index vs global partitioned index (테이블 종속 여부)
  - [ ]  prefixed partitioned index vs non-prefixed partitioned index ( 인덱스 파티션키 컬럼 위치)

## 분산 데이터베이스 설계

- [ ]  분산 데이터 베이스
  - [ ]  논리적으로 하나의 시스템에 속하지만 물리적으로는 네트워크를 통해 연결된 여러 개 컴퓨터에 분산되어 있는 데이터베이스
- [ ]  분산 데이터 베이스의 구성 요소
  - [ ]  분산 처리기(지리적으로 분산되어 있는 컴퓨터 시스템)
  - [ ]  분산 데이터베이스
  - [ ]  통신 네트워크
- [ ]  분산 데이터베이스 설계 시 고려사항
  - [ ]  작업부하 노드별 분산 정책
  - [ ]  지역 자치성 보장 정책
  - [ ]  데이터의일관성 정책
  - [ ]  회복 기능
  - [ ]  원격 접근 기능
- [ ]  분산 데이터 베이스의 목표
  - [ ]  위치 투명성
  - [ ]  중복 투명성
  - [ ]  병행 투명성
  - [ ]  장애 투명성
- [ ]  분산 데이터베이스 설계
    1. 전역 관계망을 논리적 측면에서 소규모 단위로 분할
    2. 분할된 결과를 복수 노드에 할당
  - 분산 설계 방법 : 테이블 위치 분산, 분할, 할당
- [ ]  테이블 위치 분산
  - [ ]  테이블을 각기 다른 서버에 분산 배치
  - [ ]  해당 테이블이 놓일 서버를 미리 설정해야함
- [ ]  분할
  - [ ]  분할 규칙
    - 완전성
    - 재구성
    - 상호 중첩 배제
- [ ]  할당
  - [ ]  동일한 분할을 여러 개의 서버에 생성하는 방법
  - [ ]  비중복 할당 방식
    - [ ]  최적 노드 선택 → 분산 데이터베이스의 단일 노드에서만 분할 존재
    - [ ]  테이블 간 의존성 무시, 비용 증가, 성능 저하 등의 문제 발생 가능
  - [ ]  중복 할당 방식
    - [ ]  동일한 테이블을 다른 서버에 복제하는 방식

## 데이터베이스 보안 - 접근 통제

- [ ]  접근통제
  - [ ]  데이터가 저장된 객체와 이를 사용하려는 주체 사이의 정보 흐름 제한

### 접근 통제 기술의 종류

- [ ]  임의 접근 통제(DAC, Discretionary Access Control)
  - [ ]  사용자 신원에 따라 접근 권한 부여
  - [ ]  데이터 소유자가 접근 통제 권한 지정 및 제어
  - [ ]  부여받은 권한을 다른 사용자에게 허가할 수도 있다.
  - [ ]  SQL 명령어에서 GRANT와 REVOKE 사용
- [ ]  강제 접근 통제(MAC, Mandatory Access Control)
  - [ ]  주체와 객체의 등급을 비교하여 접근 권한 부여
  - [ ]  시스템이 접근통제 권한 지정
  - [ ]  데이터 베이스 객체별로 보안 등급 부여, 사용자별로 인가 등급 부여
  - [ ]  보안 등급이 낮은 객체에게는 읽기만 가능
- [ ]  역할기반 접근통제(RBAC, Role Based Access Control)
  - [ ]  사용자의 역할에 따라 접근 권한을 부여
  - [ ]  다중 프로그래밍 환경에 최적화

### 접근통제 정책

- [ ]  신분 기반 정책
  - [ ]  IBP
    - 최소 권한 정책,단일 주체에게 하나의 객체에 대한 허가 부여
  - [ ]  GBP
    - 복수 주체에 하나의 객체에 대한 허가 부여
- [ ]  규칙 기반 정책
  - [ ]  MLP
    - 사용자 및 객체별로 지정된 기밀 분류에 따른 정책
  - [ ]  CBP
    - 집단별로 지정된 기밀 허가에 따른 정책
- [ ]  역할 기반 정책
  - GBP의 변형된 정책
  - 주체가 맡은 역할에 근거하여 객체 접근 제한
  - 인사담당자, DBA

### 접근통제 매커니즘

- [ ]  접근통제 목록
- [ ]  능력 리스트
- [ ]  보안 등급
- [ ]  패스워드
- [ ]  암호화

### 접근통제 보안모델

- [ ]  기밀성 모델
- [ ]  무결성 모델
- [ ]  접근통제 모델
  - 접근통제 행렬
    - 행은 주체, 열은 객체

### 접근통제 조건

- [ ]  값 종속 통제
- [ ]  다중 사용자 통제
- [ ]  컨텍스트 기반 통제

## 스토리지

- [ ]  DAS
  - [ ]  서버와 저장장치를 직접 연결하는 방식
  - [ ]  구축 및 유지보수 비용 저렴
  - [ ]  다른 서버 접근 및 파일 공유 불가
- [ ]  NAS
  - [ ]  서버와 저장장치를 네트워크를 통해 연결하는 방식
  - [ ]  NAS 스토리지가 내장된 저장장치를 직접 관리
  - [ ]  접속 증가시 성능 저하
- [ ]  SAN
  - [ ]  DAS + NAS
  - [ ]  서버와 저장장치를 연결하는 전용 네트워크를 별도로 구성하는 방식
  - [ ]  광 채널 스위치를 이용하여 네트워크 구성
  - [ ]  구축 비용이 많이 든다
