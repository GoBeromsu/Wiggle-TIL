## WEB 보안

### 보안 취약점과 정보보안의 3 요소

- 기밀성
  - 접근 권한을 가진 자에게만 정보가 열람되어야한다.
- 무결성
  - 허가 되지 않은 사용자가 정보를 수정할 수 없어야한다.
- 가용성
  - 허가된 사용자는 항상 정보에 접근할 수 있어야한다.
- 익스플로잇
  - 보안 취약점을 이용하여 공격하는 행위

### 해킹 단계

- 3 단계
  - 정보 수집
  - 공격
  - 포스트 익스플로잇
- 6 단계
    1. 정찰
  - 공격 대상에 대한 각종 정보를 수집하는 단계
  - 패시브 스캐닝이라고도 불림 - 공격 대상에 직접 접근하지 않기 때문임
    2. 스캐닝 및 취약점 분석
  - 액티브 스캐닝 - 공격 대상에 실제로 접근하기 때문이다.
  - 공격 대상의 운영체제, 소프트웨어 버전, 오픈 포트 스캔
    3. 침투 단계
  - 이전 단계에서 얻은 정보를 토대로 공격 수행
    4. 권한 상승 단계
  - 호스트 전체에 접근할 수 있는 관리자 권한을 획득하는 단계
    5. 퍼시스턴스
  - 사용자를 추가하거나 백도어를 설치하여 언제든지 공격자가 원할 때 다시 접속할 수 있도록 만들어 놓음
    6. 해킹 흔적 삭제
  - 공격자는 첫 공격에서 얻은 정보를 토대로 계속해서 해킹을 진행해 나갈 수도 있음으로 주의하라

### 웹 공격 단계

- 웹 어플리케이션은 그 자체로 완전히 독립적인 소프트웨어이다.
  - 하나의 호스트를 공격하는 것과 유사함

1. 정보 수집
   1. 웹 공격을 준비하는 단계
   2. 웹 애플리케이션의 구조를 분석하는 단계
2. 공격
   1. 웹 애플리케이션 대상 공격, 웹 서버 및 웹 프레임워크 등의 구성요소의 알려진 취약점을 이용하여 공격
3. 포스트 익스플로잇
   1. 주로 쉘을 획득하여 내부 정보 탈취
   2. 호스트로 침투한 경우 다른 호스트나 네트워크에 대한 공격을 이어가는 단계이다.
      1. 일반적으로 웹 애플리케이션은 일반 사용자 권한으로 실행되기 때문에 권한 상승 공격으로 이어진다.

### 웹 보안을 위한 공통 고려 사항

- 인증
  - 사용자의 신원을 확인하는 과정
  - 웹 애플리케이션의 인증 과정은 주로 로그인 기능을 통해 구현
  - 다중 인증이나, 캡챠 등 추가적인 인증 과정을 거치기도함
- 인가 및 접근 통제
  - 인가 : 특정 사용자가 어떤 리소스에 접근 권한을 가지고 있는지 확인하는 과정
    - 인증을 거쳐도 적절한 권한이 없으면 특정 구역에 접근할 수 없음
    - 인증은 신원, 인가는 권리를 확인하는 행위이다.
  - 접근 통제
    - 리소스에 대한 접근을 허용하거나 차단하는 과정
    - 인가와 접근 통제를 혼용해서 쓰기도함
    - 웹의 경우 다양한 권한의 사용자를 구분한다. - 역할 기반 통제(RBAC)
- 입력 값 검증
  - 웹 공격을 시도할 때는 대부분 요청 메시지에 전달되는 파라미터, 쿠키,  헤더 등의 값을 조작하여 이루어진다.
  - 공격 기법에 따라 값을 조작할 때 특정 문자열 입력이 필요 하다
    - SQL, Command, XXE 공격 등등
  - 적절한 입력 값 검증을 통해 상당수의 공격을 무력화 할 수 있음
  - 입력 값 검증 기법
    - 블랙 리스트 검증
      - 방어해야할 부분을 정의 해 놓는 방법
    - 화이트리스트 검증
      - 통과할 수 있는 부분을 정의 해 놓는 방법
      - 우회 기법을 찾기 어려워 보안성이 높다.
      - 편의성이나 기능 면에 있어서는 까다로울 때가 많지만, 보안성이 높아 권장된다.
- 암호화
  - 중요한 데이터는 암호화 과정을 통해 보호할 수 있다.
  - 데이터는 전송 중인 데이터와 저장된 데이터로 나눌 수 있다.
    - 전송 중인 데이터
      - 웹을 통해 전달 되는 데이터를 암호화하기 위한 프로토콜을 사용해야한다.
        - 스니핑에 의해 노출 되는 것을 막기 위함이다.
      - 세션 토큰으로 인증을 하는 경우에는 세션 토큰이 전달되는 모든 구간에 암호화를 적용하여 세션 토큰을 노출 시키지 않아야한다.
    - 저장된 데이터
      - 패스워드 등의 중요한 데이터를 디스크에 저장해야 하는 경우에도 데이터를 암호화해아한다.
      - 호스트나 데이터 베이스가 공격자에 의해 접근되어도 암호화를 통해 내용을 알아낼 수 없도록!
      - 검증된 표준 알고리즘, 프로토콜, 암호 키를 사용해야한다.
        - SHA-256이나 SHA-3 계열 이상의 알고리즘을 사용해야한다.
  - 로깅과 모니터링
    - 공격 과정에서의 비정상적인 로그를 기록 하거나 네트워크 트래픽의 변화를 감지함으로 사전 대비 가능

### OWASP Top 10
- OWASP
  - 소프트웨어의 보안성을 높이기 위해 설립된 단체
  - 웹과 애플리케이션 보안과 관련하여 많은 참고 문서와 툴을 제공
  - 프로젝트의 규모와 가치가 높은 순으로 프로젝트를 분류한다.
- OWASP 선정 기준
  - Risk = 발생 가능성 * 영향력 기반으로 기준 선정
    - 선정 시점에 가장 많이 발생한 리스크이거나, 공격의 영향력이 가장 큰 리스크
  - 공격 가능성, 확산 정도, 탐지 가능성, 영향력을 기준으로 정하여 리스크를 평가한다.
- 담당자별 OWASP Top 10 숙지 후 역할
  - 개발자
    - 반복적인 보안 프로세스와 표준 보안 통제 사용 및 구축
  - 보안 테스터
    - 지속적인 애플리케이션 보안 테스트
  - 조직 
    - 즉각적인 애플리케이션 보안 프로그램 구축
  - 애플리케이션 관리자
    - 전체 애플리케이션 라이프 사이클 관리